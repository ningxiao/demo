<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
<meta content="yes" name="apple-mobile-web-app-capable">
<meta content="black" name="apple-mobile-web-app-status-bar-style">
<meta content="telephone=no" name="format-detection">
<meta content="email=no" name="format-detection">
<title>变速动画</title>
<style type="text/css">
*{padding: 0;margin: 0;}
.ani{width: 600px;margin: 10px auto;text-align: center;border: 1px solid #000;font-size: 12px;font-family: "宋体";padding: 10px;}
.mycharactor{background-image: url(img/charector.png);width: 180px;height: 300px;border: 1px solid #999;margin: 10px auto;background-color: #fff;}
.ani a{text-decoration: none;margin-right:6px;background-color: #fff;padding: 4px;border: 1px solid #333; }
@-webkit-keyframes loop{
  0%{
    background-position: 0 0;
  }
  14.3%{
    background-position: -180px 0;
  } 
  28.6%{
    background-position: -360px 0;
  }
  42.9%{
    background-position: -540px 0;
  } 
  57.2%{
    background-position: -720px 0;
  } 
  71.5%{
    background-position: -900px 0;
  } 
  85.8%{
    background-position: -1080px 0;
  }
  100% {background-position: 0 0;}          
}
</style>
</head>
<body>
<div class="ani"  id="ani">
  <div class="mycharactor" id="mycharactor" style=""></div>
  速度设置：
  <select>
      <option value="3s">较慢</option>
      <option  value="1s">一般</option>
      <option  value="0.5s">较快</option>
      <option  value="0.1s">飞快</option>
  </select>
  <span>
    <a href="javascript:void(0);">播放</a>
    <a href="javascript:void(0);">暂停</a>
    <a href="javascript:void(0);">停止</a>
  </span>
</div>
<script type="text/javascript">
  var contianer = document.getElementById("ani");
  var mycharactor = document.getElementById("mycharactor");  
  var list = contianer.getElementsByTagName("a");
  var select = contianer.getElementsByTagName("select")[0];
  var rate = "",play = false;
  select.selectedIndex = 1;
  rate = select.value;
  select.onchange = function() {
    rate = this.value;
    mycharactor.style.cssText ="";
    setTimeout(function(){
      mycharactor.style.cssText ="-webkit-animation: loop "+rate+" step-start infinite;";
    },20);
  }  
  for(var i=0;i<list.length;i++){
    var temp = list[i];
    temp.index = i;
    temp.onclick=function(){
     switch(this.index){
        case 0:
          if(play==false){
            mycharactor.style.webkitAnimationName = "loop";
            mycharactor.style.webkitAnimationDuration = rate;
            mycharactor.style.webkitAnimationTimingFunction = "step-start";
            mycharactor.style.webkitAnimationIterationCount = "infinite";
            play=true;
          }else{
            mycharactor.style.webkitAnimationPlayState = "running";
          }
        break;
        case 1:
          mycharactor.style.webkitAnimationPlayState = "paused";
        break;
        case 2:
          play=false;
          mycharactor.style.webkitAnimation = "none";
          mycharactor.style.backgroundPosition = "0 0";
        break;
     }
    }
  }
</script>
</body>
</html>